<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title data-i18n="toolInterface"></title>
    <link href="../shared/modern.css" rel="stylesheet" />
    <script defer src="../utils/i18n.util.js" type="module"></script>
    <script defer src="../services/api/sidepanel.api.js" type="module"></script>
  </head>

  <body>
    <div class="container">
      <header class="page-header">
        <h1 data-i18n="releaseOverview"></h1>
        <a
          href="./options.html"
          id="optionsLink"
          data-i18n-title="settings"
          target="_blank"
          rel="noopener noreferrer"
          class="icon-link"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 200 200"
          >
            <g
              stroke="var(--colors-palette-modern-blue-medium)"
              stroke-linecap="round"
              stroke-miterlimit="10"
              stroke-width="13"
              fill="none"
            >
              <path d="M35.9 99.9h128.4" />
              <path d="M125.59 150h38.69m-38.69 19.46v-38.69" />
              <path d="M35.9 150.12h55.52" />
              <path d="M74.59 49.8H35.9m38.69-19.46v38.69" />
              <path d="M164.28 49.68h-55.51" />
            </g></svg
        ></a>
      </header>

      <div role="alert" class="alert alert-info">
        <p role="note" class="info info-notice">
          <small data-i18n="compareNotice"></small>
        </p>
      </div>
      <main role="main" class="grid grid-2-col">
        <!-- Jira Fields -->
        <div class="form-section">
          <div class="form-group">
            <label for="jiraProjectKey" data-i18n="jiraProjectKey"></label>
            <input
              type="text"
              id="jiraProjectKey"
              data-i18n-placeholder="jiraProjectKeyPlaceholder"
              value="DDSTM"
            />
          </div>
          <div class="form-group">
            <label
              for="jiraFixVersion"
              data-i18n="jiraReleaseVersionId"
            ></label>
            <input
              type="text"
              id="jiraFixVersion"
              data-i18n-placeholder="jiraReleaseVersionIdPlaceholder"
              list="versionsDatalist"
            />
            <p class="input-hint" data-i18n="jiraReleaseVersionIdHint"></p>
            <button
              id="getVersionsBtn"
              class="btn btn-secondary btn-sm"
              data-i18n="getReleases"
            ></button>
            <datalist id="versionsDatalist"></datalist>
          </div>
        </div>
        <!-- GitLab Fields -->
        <div class="form-section">
          <div class="form-group">
            <label for="gitlabProjectId" data-i18n="gitlabProjectId"></label>
            <input
              type="text"
              id="gitlabProjectId"
              data-i18n-placeholder="gitlabProjectIdPlaceholder"
            />
            <p class="input-hint" data-i18n="gitlabProjectIdHint"></p>
          </div>
          <div class="form-group">
            <label
              for="gitlabCurrentTag"
              data-i18n="gitlabCurrentReleaseTag"
            ></label>
            <input
              type="text"
              id="gitlabCurrentTag"
              data-i18n-placeholder="gitlabCurrentReleaseTagPlaceholder"
            />
          </div>
          <div class="form-group">
            <label
              for="gitlabPreviousTag"
              data-i18n="gitlabPreviousReleaseTag"
            ></label>
            <input
              type="text"
              id="gitlabPreviousTag"
              data-i18n-placeholder="gitlabPreviousReleaseTagPlaceholder"
            />
          </div>
        </div>
      </main>

      <div class="grid grid-2-col">
        <button
          id="resetBtn"
          class="btn btn-secondary"
          data-i18n="reset"
        ></button>
        <button
          id="generateSummaryBtn"
          class="btn btn-primary"
          data-i18n="generateSummary"
        ></button>
      </div>
      <details id="viewDemoReportDetails" class="demo-details">
        <summary data-i18n="viewDemoReport"></summary>
        <div id="exampleResults" class="results-section">
          <!--  Demo Report Sections will be populated here by JS  -->
          <div class="side-by-side">
            <div class="column report-section">
              <h3 data-i18n="jiraTickets"></h3>
              <div id="jira-tickets-example">
                <!--  Populated by JS  -->
              </div>
            </div>
            <div class="column report-section">
              <h3 data-i18n="gitlabCommits"></h3>
              <div id="gitlab-commits-example">
                <!--  Populated by JS  -->
              </div>
            </div>
          </div>
          <div class="report-section">
            <h3 data-i18n="gitlabTags"></h3>
            <div id="gitlab-tags-example">
              <!--  Populated by JS  -->
            </div>
          </div>
        </div>
      </details>

      <div id="loading" class="loading-spinner hidden"></div>
      <div id="statusMessage" class="status-message"></div>

      <div id="summaryResults" class="results-section hidden">
        <div class="interactive-diagram">
          <div class="stories-commits-container">
            <div class="stories-section">
              <h2 data-i18n="jiraTickets"></h2>
              <p>All user stories associated with the next release.</p>
              <div id="jira-tickets" class="stories-list"></div>
            </div>
            <div class="commits-section">
              <h2 data-i18n="gitlabCommits"></h2>
              <!-- TODO: add previous release version number dynamically -->
              <p>All commits since "GitLab Previous Release Tag" release.</p>
              <div id="gitlab-commits" class="commits-list"></div>
            </div>
          </div>
          <svg id="connection-lines" class="connection-lines"></svg>
        </div>
        <div class="releases-section">
          <h2 data-i18n="gitlabReleases"></h2>
          <div id="gitlab-releases" class="releases-list"></div>
        </div>
      </div>
      <footer class="page-footer">
        <small data-i18n="poweredBy"></small>
      </footer>
    </div>
    <!-- Toast container will be created by JavaScript -->
  </body>
</html>
